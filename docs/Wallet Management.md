## Wallet Management

### Android

1. Exporting a Wallet: A Qr code for the users wallet protected by the master password can be generated by using the following method.

```java
String qrCode = WalletManagement.exportWallet(WebView webview, OnWalletExportedCallback callback);
```

This method requires an instance of `WebView` - the `WebView` should be attached to the current `Activity` - to be passed in as the first argument.

The `exportWallet` method must not be run in the UI Thread, and the application is responsible for displaying the Qr code using an appropriate Qr code viewer.

- Get the result by implementing the following callback

```java
WalletManagement.OnWalletExportCallback {
	void exportComplete(ErrorResponse error, String qrCode);
}
```

2. Importing a Wallet: A Qr code can be used to reconstruct a users wallet by using the following method

- The importWallet method requires an instance of `WebView` - the `WebView` should be attached to the current `Activity` - to be passed in as the first argument. The second argument should be the Base 64 encoded Qr code, and the third argument should be a user provided password that checks the integrity of the Qr code.
-

```java
	WalletManagement.importWallet(WebView webview, String qrCode, String password, WalletManagement.OnWalletImportedCallback callback);
```

- Get the result by implementing the following interface

```java
WalletManagement.OnWalletImportedCallback {
	void importComplete(ErrorResponse error, String message)
}
```

**Note: This action if successful will delete the current Wallet of the user**

3. Deleting a Wallet: The users Wallet can be wiped by invoking the following method

```java
WalletManagement.deleteWallet(String password, (error, message) -> {
	if (error) {
		// Show error.getErrorMessage();
	} else {
		// Show message to confirm wallet has been successfully imported
	}
});
```

4. Listing accounts: The users `Account`'s can be fetched by calling the following method

```java
List<Account> accounts = WalletManagement.listAccounts();
```

5. Deleting an individual account: An Account can be deleted by calling the following method

```java
WalletManagement.deleteAccount(Account account);
```

6. Synchronizing the users Wallet with server: The `syncWallet` method call checks the server for updates to the users Wallet and updates the Wallet as necessary

```java
WalletManagement.sync(WalletManagement.OnSyncCompletedCallback callback);
```

7. Changing the master password: The `changeMasterPassword` takes the user's current password and updates it a new password

```java
boolean success = WalletManagement.changeMasterPassword(String oldPassword, String newPassword);
```

### iOS

1. Exporting a Wallet: A Qr code for the users wallet protected by the master password can be generated by using the following method.

```swift
sdk.walletUtility.walletUtility((error: ErrorResponse, qrCode: String) -> Void);
```

The `exportWallet` method must not be run in the UI Thread, and the application is responsible for displaying the Qr code using an appropriate Qr code viewer.

2. Importing a Wallet: A Qr code can be used to reconstruct a users wallet by using the following method

- The importWallet method requires Base 64 encoded Qr code, and the user provided password that checks the integrity of the Qr code.
-

```java
	sdk.walletUtility.importWallet(password: String, qrCode: String, (error: ErrorResponse, message: String) -> void);
```

**Note: This action if successful will delete the current Wallet of the user**

3. Deleting a Wallet: The users Wallet can be wiped by invoking the following method

```swift
sdk.walletUtility.deleteWallet();
```

4. Listing accounts: The users `Account`'s can be fetched by calling the following method

```swift
var accounts = sdk.walletUtility.listAccounts();
```

5. Deleting an individual account: An Account can be deleted by calling the following method

```swift
sdk.walletUtility.deleteAccount(account: Account, result: (success: Bool) -> void);
```

6. Synchronizing the users Wallet with server: The `sync` method of `walletUtility` call checks the server for updates to the users Wallet and updates the Wallet as necessary

```swift
sdk.walletUtility.sync(result: (success: Bool) -> void);
```

7. Changing the master password: The `changePassword` method of `walletUtility` takes the user's current password and updates it a new password

```swift
sdk.walletUtility.changePassword(old: "abc", new: "xyz", result: (success: Bool) -> void);
```